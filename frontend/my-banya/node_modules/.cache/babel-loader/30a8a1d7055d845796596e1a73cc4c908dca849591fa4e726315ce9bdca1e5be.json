{"ast":null,"code":"import{useState,useMemo}from'react';import ReservationsFilters from'../Reservations/ReservationsFilters';import BookingDetailsModal from'../Reservations/BookingDetailsModal';import AddBookingModal from'../Reservations/AddBookingModal';import{useGetBathsQuery,useGetReservationsByDateQuery}from'../../../redux/slices/apiSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminReservations(){const today=new Date().toISOString().split('T')[0];const[filters,setFilters]=useState({date:today});const[selectedBooking,setSelectedBooking]=useState(null);const[isAddModalOpen,setIsAddModalOpen]=useState(false);const[editingBooking,setEditingBooking]=useState(null);// Получаем ВСЕ бани\nconst{data:baths=[],isLoading:isLoadingBaths}=useGetBathsQuery();// Получаем брони на выбранную дату\nconst{data:reservations=[],isLoading:isLoadingReservations}=useGetReservationsByDateQuery({date:filters.date||today});// Простая генерация слотов 9:00 - 23:30\nconst timeSlots=useMemo(()=>{const slots=[];for(let hour=9;hour<24;hour++){for(let minute of[0,30]){const timeStr=\"\".concat(hour.toString().padStart(2,'0'),\":\").concat(minute.toString().padStart(2,'0'));const dateTime=new Date(\"\".concat(filters.date,\"T\").concat(timeStr,\":00\"));slots.push({time:timeStr,start:dateTime,end:new Date(dateTime.getTime()+30*60000)});}}return slots;},[filters.date]);// Формируем список бань с бронями\nconst bathsToDisplay=useMemo(()=>{if(!Array.isArray(baths)||baths.length===0){return[];}return baths.map(bath=>{const bathId=bath.bath_id!==undefined?bath.bath_id:bath.id;if(bathId===undefined){console.warn('⚠️ У бани отсутствует и bath_id, и id:',bath);return null;}const bookings=(Array.isArray(reservations)?reservations:[]).filter(res=>{if(!res||!res.bath_id||!res.start_datetime)return false;const bookingDate=res.start_datetime.split('T')[0];return res.bath_id===bathId&&bookingDate===filters.date;});return{bath_id:bathId,bathName:bath.name||'Без названия',bookings:bookings,hasBookings:bookings.length>0};}).filter(Boolean);},[baths,reservations,filters.date]);// Формат времени\nconst formatTime=date=>{return date.toLocaleTimeString('ru-RU',{hour:'2-digit',minute:'2-digit'});};// Формат интервала времени: \"09:00 – 09:30\"\nconst formatTimeRange=(start,end)=>{const options={hour:'2-digit',minute:'2-digit'};const startStr=start.toLocaleTimeString('ru-RU',options);const endStr=end.toLocaleTimeString('ru-RU',options);return\"\".concat(startStr,\" \\u2013 \").concat(endStr);};// Обработчики\nconst handleApply=newFilters=>{setFilters(newFilters);};const handleViewBooking=booking=>{setSelectedBooking(booking);};const handleCloseModal=()=>{setSelectedBooking(null);};const handleAddBooking=()=>{setIsAddModalOpen(true);// Открываем модалку для добавления\nsetEditingBooking(null);// Убеждаемся, что нет данных редактирования\n};const handleEditBooking=booking=>{setEditingBooking(booking);setSelectedBooking(null);// закрываем просмотр\n};const handleCloseAllModals=()=>{setSelectedBooking(null);setEditingBooking(null);setIsAddModalOpen(false);// ← добавь это\n};// Загрузка\nif(isLoadingBaths||isLoadingReservations){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-16\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-semibold text-gray-800 mb-6\",children:[\"\\u0417\\u0430\\u043F\\u0438\\u0441\\u0438 \\u043D\\u0430 \",new Date(filters.date).toLocaleDateString('ru-RU',{day:'numeric',month:'long',year:'numeric'})]}),/*#__PURE__*/_jsx(ReservationsFilters,{onApply:handleApply,onAddBooking:handleAddBooking}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto pb-4 -mx-4 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex space-x-6 min-h-[600px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 w-32 bg-gray-50 p-4 border-r border-gray-200 sticky top-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"\\u0412\\u0420\\u0415\\u041C\\u042F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-14\"}),timeSlots.map((slot,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 h-14 flex items-center justify-center leading-none\",children:formatTimeRange(slot.start,slot.end)},idx))]}),bathsToDisplay.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 p-8\",children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0431\\u0430\\u043D\\u044C\"}):bathsToDisplay.map(bath=>/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 w-96\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b border-gray-200 bg-gray-50\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:bath.bathName})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full table-fixed border-separate border-spacing-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"})})}),/*#__PURE__*/_jsx(\"tbody\",{children:timeSlots.map((slot,idx)=>{const overlappingBookings=bath.bookings.filter(booking=>{const start=new Date(booking.start_datetime);const end=new Date(booking.end_datetime);const startUTC=new Date(start.toISOString().replace('+05:00','Z'));const endUTC=new Date(end.toISOString().replace('+05:00','Z'));return startUTC<slot.end&&endUTC>slot.start;});const activeBooking=overlappingBookings[0];const bookingStartsHere=bath.bookings.find(booking=>{const start=new Date(booking.start_datetime);const end=new Date(booking.end_datetime);const startUTC=new Date(start.toISOString().replace('+05:00','Z'));const endUTC=new Date(end.toISOString().replace('+05:00','Z'));return startUTC>=slot.start&&startUTC<slot.end;});const durationMinutes=bookingStartsHere?(new Date(bookingStartsHere.end_datetime)-new Date(bookingStartsHere.start_datetime))/60000:0;const heightPercent=durationMinutes/30*100;return/*#__PURE__*/_jsx(\"tr\",{className:\"hover:bg-gray-25 transition-colors\",children:/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-0 relative bg-gray-50\",style:{height:'56px',overflow:'visible'},children:overlappingBookings.length>0&&activeBooking&&bookingStartsHere?/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-x-0 bg-red-50 border-2 border-red-400 text-red-800 text-sm font-medium rounded-lg px-3 flex items-center justify-center cursor-pointer hover:shadow transition-all duration-200 group\",style:{top:0,height:\"\".concat(heightPercent,\"%\"),zIndex:10,overflow:'visible'},title:\"\".concat(activeBooking.client_name,\" \\u2022 \").concat(formatTime(new Date(activeBooking.start_datetime)),\" \\u2013 \").concat(formatTime(new Date(activeBooking.end_datetime))),onClick:()=>handleViewBooking(activeBooking),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1 bg-red-400 rounded-full absolute left-0 top-1 bottom-1 group-hover:w-2 transition-all duration-200\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate max-w-full text-center leading-tight font-medium\",children:activeBooking.client_name})]}):overlappingBookings.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center text-green-600 text-sm font-medium bg-green-50 rounded-lg border border-green-200\",children:\"\\u0421\\u0432\\u043E\\u0431\\u043E\\u0434\\u043D\\u043E\"}):null})},idx);})})]})})]})},bath.bath_id))]})}),/*#__PURE__*/_jsx(BookingDetailsModal,{booking:selectedBooking,onClose:handleCloseAllModals,onEdit:handleEditBooking,onDelete:()=>{/* реализуйте позже */}}),/*#__PURE__*/_jsx(AddBookingModal,{isOpen:isAddModalOpen||editingBooking!==null,onClose:handleCloseAllModals,booking:editingBooking// если null — режим создания\n})]});}export default AdminReservations;","map":{"version":3,"names":["useState","useMemo","ReservationsFilters","BookingDetailsModal","AddBookingModal","useGetBathsQuery","useGetReservationsByDateQuery","jsx","_jsx","jsxs","_jsxs","AdminReservations","today","Date","toISOString","split","filters","setFilters","date","selectedBooking","setSelectedBooking","isAddModalOpen","setIsAddModalOpen","editingBooking","setEditingBooking","data","baths","isLoading","isLoadingBaths","reservations","isLoadingReservations","timeSlots","slots","hour","minute","timeStr","concat","toString","padStart","dateTime","push","time","start","end","getTime","bathsToDisplay","Array","isArray","length","map","bath","bathId","bath_id","undefined","id","console","warn","bookings","filter","res","start_datetime","bookingDate","bathName","name","hasBookings","Boolean","formatTime","toLocaleTimeString","formatTimeRange","options","startStr","endStr","handleApply","newFilters","handleViewBooking","booking","handleCloseModal","handleAddBooking","handleEditBooking","handleCloseAllModals","className","children","toLocaleDateString","day","month","year","onApply","onAddBooking","slot","idx","overlappingBookings","end_datetime","startUTC","replace","endUTC","activeBooking","bookingStartsHere","find","durationMinutes","heightPercent","style","height","overflow","top","zIndex","title","client_name","onClick","onClose","onEdit","onDelete","isOpen"],"sources":["C:/Users/khram/Desktop/ilya/banya/frontend/my-banya/src/pages/Admin/Reservations/AdminReservations.jsx"],"sourcesContent":["import { useState, useMemo } from 'react';\r\nimport ReservationsFilters from '../Reservations/ReservationsFilters';\r\nimport BookingDetailsModal from '../Reservations/BookingDetailsModal';\r\nimport AddBookingModal from '../Reservations/AddBookingModal';\r\nimport { useGetBathsQuery, useGetReservationsByDateQuery } from '../../../redux/slices/apiSlice';\r\n\r\nfunction AdminReservations() {\r\n  const today = new Date().toISOString().split('T')[0];\r\n  const [filters, setFilters] = useState({ date: today });\r\n  const [selectedBooking, setSelectedBooking] = useState(null);\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [editingBooking, setEditingBooking] = useState(null);\r\n  // Получаем ВСЕ бани\r\n  const { data: baths = [], isLoading: isLoadingBaths } = useGetBathsQuery();\r\n  // Получаем брони на выбранную дату\r\n  const { data: reservations = [], isLoading: isLoadingReservations } = useGetReservationsByDateQuery({\r\n    date: filters.date || today,\r\n  });\r\n\r\n  // Простая генерация слотов 9:00 - 23:30\r\n  const timeSlots = useMemo(() => {\r\n    const slots = [];\r\n    for (let hour = 9; hour < 24; hour++) {\r\n      for (let minute of [0, 30]) {\r\n        const timeStr = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\r\n        const dateTime = new Date(`${filters.date}T${timeStr}:00`);\r\n        slots.push({\r\n          time: timeStr,\r\n          start: dateTime,\r\n          end: new Date(dateTime.getTime() + 30 * 60000),\r\n        });\r\n      }\r\n    }\r\n    return slots;\r\n  }, [filters.date]);\r\n\r\n  // Формируем список бань с бронями\r\n  const bathsToDisplay = useMemo(() => {\r\n    if (!Array.isArray(baths) || baths.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    return baths.map(bath => {\r\n      const bathId = bath.bath_id !== undefined ? bath.bath_id : bath.id;\r\n      if (bathId === undefined) {\r\n        console.warn('⚠️ У бани отсутствует и bath_id, и id:', bath);\r\n        return null;\r\n      }\r\n\r\n      const bookings = (Array.isArray(reservations) ? reservations : []).filter(res => {\r\n        if (!res || !res.bath_id || !res.start_datetime) return false;\r\n        const bookingDate = res.start_datetime.split('T')[0];\r\n        return res.bath_id === bathId && bookingDate === filters.date;\r\n      });\r\n\r\n      return {\r\n        bath_id: bathId,\r\n        bathName: bath.name || 'Без названия',\r\n        bookings: bookings,\r\n        hasBookings: bookings.length > 0,\r\n      };\r\n    }).filter(Boolean);\r\n  }, [baths, reservations, filters.date]);\r\n\r\n  // Формат времени\r\n  const formatTime = (date) => {\r\n    return date.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  // Формат интервала времени: \"09:00 – 09:30\"\r\n  const formatTimeRange = (start, end) => {\r\n    const options = { hour: '2-digit', minute: '2-digit' };\r\n    const startStr = start.toLocaleTimeString('ru-RU', options);\r\n    const endStr = end.toLocaleTimeString('ru-RU', options);\r\n    return `${startStr} – ${endStr}`;\r\n  };\r\n\r\n  // Обработчики\r\n\r\n  const handleApply = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleViewBooking = (booking) => {\r\n    setSelectedBooking(booking);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setSelectedBooking(null);\r\n  };\r\n\r\n  const handleAddBooking = () => {\r\n    setIsAddModalOpen(true); // Открываем модалку для добавления\r\n    setEditingBooking(null); // Убеждаемся, что нет данных редактирования\r\n  };\r\n\r\n\r\n  const handleEditBooking = (booking) => {\r\n    setEditingBooking(booking);\r\n    setSelectedBooking(null); // закрываем просмотр\r\n  };\r\n\r\n  const handleCloseAllModals = () => {\r\n    setSelectedBooking(null);\r\n    setEditingBooking(null);\r\n    setIsAddModalOpen(false); // ← добавь это\r\n  };\r\n  // Загрузка\r\n  if (isLoadingBaths || isLoadingReservations) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-16\">\r\n        <div className=\"text-gray-500\">Загрузка...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">\r\n        Записи на {new Date(filters.date).toLocaleDateString('ru-RU', {\r\n          day: 'numeric',\r\n          month: 'long',\r\n          year: 'numeric',\r\n        })}\r\n      </h2>\r\n\r\n      <ReservationsFilters\r\n        onApply={handleApply}\r\n        onAddBooking={handleAddBooking}\r\n      />\r\n\r\n      <div className=\"overflow-x-auto pb-4 -mx-4 px-4\">\r\n        <div className=\"inline-flex space-x-6 min-h-[600px]\">\r\n          {/* Колонка времени */}\r\n          <div className=\"flex-shrink-0 w-32 bg-gray-50 p-4 border-r border-gray-200 sticky top-0\">\r\n            <div className=\"text-sm font-medium text-gray-700 mb-2\">ВРЕМЯ</div>\r\n            {/* Пустая строка для выравнивания с таблицами */}\r\n            <div className=\"h-14\"></div>\r\n            {timeSlots.map((slot, idx) => (\r\n              <div key={idx} className=\"text-sm text-gray-600 h-14 flex items-center justify-center leading-none\">\r\n                {formatTimeRange(slot.start, slot.end)}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Колонки с банями */}\r\n          {bathsToDisplay.length === 0 ? (\r\n            <div className=\"text-gray-500 p-8\">Нет доступных бань</div>\r\n          ) : (\r\n            bathsToDisplay.map((bath) => (\r\n              <div key={bath.bath_id} className=\"flex-shrink-0 w-96\">\r\n                <div className=\"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden\">\r\n                  <div className=\"p-4 border-b border-gray-200 bg-gray-50\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-800\">{bath.bathName}</h3>\r\n                  </div>\r\n\r\n                  {/* Таблица временных слотов */}\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full table-fixed border-separate border-spacing-0\">\r\n                      <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                            Статус\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {timeSlots.map((slot, idx) => {\r\n                          const overlappingBookings = bath.bookings.filter(booking => {\r\n                            const start = new Date(booking.start_datetime);\r\n                            const end = new Date(booking.end_datetime);\r\n\r\n                            const startUTC = new Date(start.toISOString().replace('+05:00', 'Z'));\r\n                            const endUTC = new Date(end.toISOString().replace('+05:00', 'Z'));\r\n\r\n                            return startUTC < slot.end && endUTC > slot.start;\r\n                          });\r\n\r\n                          const activeBooking = overlappingBookings[0];\r\n\r\n                          const bookingStartsHere = bath.bookings.find(booking => {\r\n                            const start = new Date(booking.start_datetime);\r\n                            const end = new Date(booking.end_datetime);\r\n\r\n                            const startUTC = new Date(start.toISOString().replace('+05:00', 'Z'));\r\n                            const endUTC = new Date(end.toISOString().replace('+05:00', 'Z'));\r\n\r\n                            return startUTC >= slot.start && startUTC < slot.end;\r\n                          });\r\n\r\n                          const durationMinutes = bookingStartsHere\r\n                            ? (new Date(bookingStartsHere.end_datetime) - new Date(bookingStartsHere.start_datetime)) / 60000\r\n                            : 0;\r\n                          const heightPercent = (durationMinutes / 30) * 100;\r\n\r\n                          return (\r\n                            <tr key={idx} className=\"hover:bg-gray-25 transition-colors\">\r\n                              <td className=\"px-6 py-0 relative bg-gray-50\" style={{ height: '56px', overflow: 'visible' }}>\r\n                                {overlappingBookings.length > 0 && activeBooking && bookingStartsHere ? (\r\n                                  <div\r\n                                    className=\"absolute inset-x-0 bg-red-50 border-2 border-red-400 text-red-800 text-sm font-medium rounded-lg px-3 flex items-center justify-center cursor-pointer hover:shadow transition-all duration-200 group\"\r\n                                    style={{\r\n                                      top: 0,\r\n                                      height: `${heightPercent}%`,\r\n                                      zIndex: 10,\r\n                                      overflow: 'visible',\r\n                                    }}\r\n                                    title={`${activeBooking.client_name} • ${formatTime(new Date(activeBooking.start_datetime))} – ${formatTime(new Date(activeBooking.end_datetime))}`}\r\n                                    onClick={() => handleViewBooking(activeBooking)}\r\n                                  >\r\n                                    <div className=\"w-1 bg-red-400 rounded-full absolute left-0 top-1 bottom-1 group-hover:w-2 transition-all duration-200\"></div>\r\n                                    <span className=\"truncate max-w-full text-center leading-tight font-medium\">\r\n                                      {activeBooking.client_name}\r\n                                    </span>\r\n                                  </div>\r\n                                ) : overlappingBookings.length === 0 ? (\r\n                                  <div className=\"absolute inset-0 flex items-center justify-center text-green-600 text-sm font-medium bg-green-50 rounded-lg border border-green-200\">\r\n                                    Свободно\r\n                                  </div>\r\n                                ) : null}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Модалка для ПРОСМОТРА брони */}\r\n      <BookingDetailsModal\r\n        booking={selectedBooking}\r\n        onClose={handleCloseAllModals}\r\n        onEdit={handleEditBooking}\r\n        onDelete={() => { /* реализуйте позже */ }}\r\n      />\r\n\r\n      {/* Модалка для ДОБАВЛЕНИЯ или РЕДАКТИРОВАНИЯ */}\r\n      <AddBookingModal\r\n        isOpen={isAddModalOpen || editingBooking !== null}\r\n        onClose={handleCloseAllModals}\r\n        booking={editingBooking} // если null — режим создания\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminReservations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}